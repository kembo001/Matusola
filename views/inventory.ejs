<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Character encoding and viewport -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />
    
    <!-- Primary Meta tags -->
    <meta name="description" content="Browse wholesale cars for sale in Ramsey, MN. Quality used vehicles at wholesale prices. Updated daily with new inventory. Easy financing and nationwide shipping." />    
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Vehicle Inventory - Wholesale Cars MN" />
    <meta property="og:description" content="Browse our selection of quality pre-owned vehicles at Wholesale Cars MN. Updated daily with new arrivals. Find your next car in Ramsey, MN." />
    <meta property="og:image" content="https://www.wholesalecarsmn.com/images/our-inventory.jpg" />
    <meta property="og:url" content="https://www.wholesalecarsmn.com/inventory" />

    <!-- Canonical URL -->
    <title>Wholesale Cars for Sale MN | Used Vehicles Ramsey Minnesota</title>
    <link rel="canonical" href="https://www.wholesalecarsmn.com/inventory" />
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/favicon/favicon.ico" sizes="48x48" />
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png" />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <meta name="msapplication-TileImage" content="/favicon/favicon-96x96.png" />
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/styles.css" />
</head>
  <body class="min-h-screen flex flex-col bg-gray-50">
    <!-- Header Banner -->
    <header class="bg-white sticky top-0 z-50 shadow-md">
      <div class="max-w-7xl mx-auto px-4 py-3 sm:py-4 sm:px-6 lg:px-8 flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-0">
        <a href="/" class="text-2xl font-bold text-gray-900 hover:text-gray-700 transition-colors">
          Wholesale Cars
        </a>
        <div class="flex flex-col sm:flex-row items-center gap-2 sm:gap-6 text-sm">
          <a href="https://maps.app.goo.gl/oiKn7Hk6RhoiGgvX9" target="_blank" class="flex items-center text-gray-600 hover:text-gray-900 transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
            7820 Riverdale drive NW, Ramsey, MN 55303
          </a>
          <div class="flex items-center space-x-2">
            <a href="tel:763-620-1311" class="flex items-center text-gray-600 hover:text-gray-900 transition">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
              (763) 620-1311
            </a>
          </div>
        </div>
      </div>
    </header>

    <main class="flex-grow">
      <!-- Filters Section -->
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <div class="flex flex-col">
            <label for="status-select" class="sr-only">Filter by Status</label>
            <select 
              id="status-select"
              class="px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
              name="status"
              onchange="updateFilters(this)"
            >
              <option value="available" <%= currentStatus === 'available' ? 'selected' : '' %>>Available Vehicles</option>
              <option value="sold" <%= currentStatus === 'sold' ? 'selected' : '' %>>Sold Vehicles</option>
              <option value="all" <%= currentStatus === 'all' ? 'selected' : '' %>>All Vehicles</option>
            </select>
          </div>

          <div class="flex flex-col">
            <label for="sort-select" class="sr-only">Sort Vehicles</label>
            <select 
              id="sort-select"
              class="px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
              name="sort"
              onchange="updateFilters(this)"
            >
              <option value="newest" <%= currentSort === 'newest' ? 'selected' : '' %>>Newest First</option>
              <option value="price-high" <%= currentSort === 'price-high' ? 'selected' : '' %>>Price: High to Low</option>
              <option value="price-low" <%= currentSort === 'price-low' ? 'selected' : '' %>>Price: Low to High</option>
              <option value="mileage-low" <%= currentSort === 'mileage-low' ? 'selected' : '' %>>Mileage: Low to High</option>
              <option value="mileage-high" <%= currentSort === 'mileage-high' ? 'selected' : '' %>>Mileage: High to Low</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Inventory Grid -->
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <% vehicles.forEach(vehicle => { %>
            <div class="inventory__card bg-white rounded-xl shadow-md overflow-hidden">
              <!-- Image Gallery -->
              <div class="relative aspect-[4/3]">
                <div class="inventory__gallery-container h-full relative">
                  <img 
                    src="<%= vehicle.image_url %>" 
                    alt="<%= vehicle.title %>" 
                    class="w-full h-full object-cover absolute inset-0"
                    loading="lazy" 
                  />
                  <% if (vehicle.status === 'sold') { %>
                    <div class="absolute inset-0 overflow-hidden">
                      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-red-600/80 text-white px-16 py-3 rotate-[-35deg] shadow-lg border-2 border-white">
                        <span class="text-3xl font-bold tracking-widest">SOLD</span>
                      </div>
                    </div>
                  <% } %>
                </div>
                <button class="inventory__gallery-prev absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-black/75 transition" style="display: none;">←</button>
                <button class="inventory__gallery-next absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-black/75 transition" style="display: none;">→</button>
                <div class="inventory__gallery-loading absolute inset-0 bg-black/50 flex flex-col items-center justify-center text-white" style="display: none;">
                  <div class="w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin mb-2"></div>
                  <div>Loading images...</div>
                </div>
                <div class="inventory__counter absolute bottom-2 right-2 bg-black/50 text-white px-2 py-1 rounded-md text-sm" style="display: none;">
                  <span id="currentImage">1</span>/<span id="totalImages">1</span>
                </div>
              </div>

              <!-- Vehicle Info -->
              <div class="p-4">
                <div class="grid grid-cols-[60%_40%] gap-4">
                  <div class="space-y-4">
                    <h2 class="text-xl font-bold text-gray-900 line-clamp-2">
                      <%= vehicle.title %>
                    </h2>
                    <div class="space-y-2">
                      <p class="text-gray-600">
                        <%= vehicle.mileage.toLocaleString() %> miles
                      </p>
                      <p class="text-sm text-gray-500">
                        <span class="font-medium">VIN:</span> <%= vehicle.vin %>
                      </p>
                    </div>
                  </div>
                  <div class="flex flex-col items-end px-2">
                    <p class="text-2xl font-bold text-gray-900 mb-auto pt-1">
                      $<%= vehicle.price.toLocaleString() %>
                    </p>
                    <button 
                      class="bg-gray-900 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition text-sm w-[90%]"
                      onclick="toggleDetails(this)"
                      data-vehicle-id="<%= vehicle.id %>"
                      data-images-folder="<%= vehicle.images_folder %>"
                    >
                      See More
                    </button>
                  </div>
                </div>
              </div>

              <!-- Expandable Details -->
              <div class="inventory__expand hidden border-t border-gray-200">
                <div class="p-4 bg-gray-50 space-y-4">
                  <div class="grid grid-cols-2 gap-4">
                    <p class="text-sm"><strong>Year:</strong> <%= vehicle.year %></p>
                    <p class="text-sm"><strong>Make:</strong> <%= vehicle.make %></p>
                    <p class="text-sm"><strong>Model:</strong> <%= vehicle.model %></p>
                    <p class="text-sm"><strong>Trim:</strong> <%= vehicle.trim %></p>
                    <p class="text-sm"><strong>Engine:</strong> <%= vehicle.engine %></p>
                    <p class="text-sm"><strong>Transmission:</strong> <%= vehicle.transmission %></p>
                    <p class="text-sm"><strong>Drivetrain:</strong> <%= vehicle.drivetrain %></p>
                    <p class="text-sm">
                      <strong>Title Status:</strong> 
                      <span class="inline-block px-2 py-1 text-xs font-semibold rounded
                        <%= vehicle.title_status.toLowerCase() === 'clean' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800' %>">
                        <%= vehicle.title_status %>
                      </span>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          <% }); %>
        </div>
      </div>

      <!-- Pagination -->
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex justify-center items-center gap-4">
        <% if (hasPrevPage) { %>
          <a href="/inventory?page=<%= currentPage - 1 %>&status=<%= currentStatus %>&sort=<%= currentSort %>" 
             class="px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition">
            Previous
          </a>
        <% } %>

        <span class="text-gray-600">Page <%= currentPage %> of <%= totalPages %></span>

        <% if (hasNextPage) { %>
          <a href="/inventory?page=<%= currentPage + 1 %>&status=<%= currentStatus %>&sort=<%= currentSort %>"
             class="px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition">
            Next
          </a>
        <% } %>
      </div>
    </main>

    <script>
    function updateFilters(select) {
      const status = document.querySelector('select[name="status"]').value;
      const sort = document.querySelector('select[name="sort"]').value;
      window.location.href = `/inventory?status=${status}&sort=${sort}`;
    }

    function toggleDetails(button) {
      const card = button.closest('.inventory__card');
      const expandSection = card.querySelector('.inventory__expand');
      
      // Toggle the hidden class instead of using active
      expandSection.classList.toggle('hidden');
      button.textContent = expandSection.classList.contains('hidden') ? 'See More' : 'See Less';
      
      if (!expandSection.classList.contains('hidden') && !button.dataset.imagesLoaded) {
        const imagesFolder = button.dataset.imagesFolder;
        loadVehicleImages(card, imagesFolder);
        button.dataset.imagesLoaded = 'true';
      }
    }

    function loadVehicleImages(card, imagesFolder) {
      const galleryContainer = card.querySelector('.inventory__gallery-container');
      const loadingEl = card.querySelector('.inventory__gallery-loading');
      const prevBtn = card.querySelector('.inventory__gallery-prev');
      const nextBtn = card.querySelector('.inventory__gallery-next');
      const counter = card.querySelector('.inventory__counter');
      const currentImageEl = counter.querySelector('#currentImage');
      const totalImagesEl = counter.querySelector('#totalImages');
      
      loadingEl.style.display = 'flex';
      prevBtn.style.display = 'none';
      nextBtn.style.display = 'none';
      counter.style.display = 'none';
      
      const images = [];
      let loadedCount = 0;
      
      // Add the first image that's already loaded
      const firstImage = galleryContainer.querySelector('img');
      images.push(firstImage);
      
      const loadImage = (index) => {
        const img = new Image();
        img.src = `https://wholesalecars.sfo3.cdn.digitaloceanspaces.com/${imagesFolder}/${index}.jpg?t=${Date.now()}`;
        
        img.onload = () => {
          loadedCount++;
          const imgWrapper = document.createElement('div');
          imgWrapper.className = 'absolute inset-0';
          img.className = 'w-full h-full object-cover';
          img.style.display = 'none';
          imgWrapper.appendChild(img);
          galleryContainer.appendChild(imgWrapper);
          images.push(img);
          
          // Try loading next image
          loadImage(index + 1);
          
          // If we have at least 2 images, show navigation and counter
          if (images.length >= 2) {
            loadingEl.style.display = 'none';
            prevBtn.style.display = 'flex';
            nextBtn.style.display = 'flex';
            counter.style.display = 'block';
            totalImagesEl.textContent = images.length;
            setupNavigation(card, images);
          }
        };
        
        img.onerror = () => {
          if (images.length > 0) {
            loadingEl.style.display = 'none';
            if (images.length > 1) {
              prevBtn.style.display = 'flex';
              nextBtn.style.display = 'flex';
              counter.style.display = 'block';
              totalImagesEl.textContent = images.length;
            }
            setupNavigation(card, images);
          }
        };
      };
      
      // Start loading from image 2 (since 1 is already loaded)
      loadImage(2);
    }

    function setupNavigation(card, images) {
      let currentIndex = 0;
      const prevBtn = card.querySelector('.inventory__gallery-prev');
      const nextBtn = card.querySelector('.inventory__gallery-next');
      const currentImageEl = card.querySelector('#currentImage');
      
      images[0].style.display = 'block';
      currentImageEl.textContent = '1';
      
      prevBtn.onclick = () => {
        images[currentIndex].style.display = 'none';
        currentIndex = (currentIndex - 1 + images.length) % images.length;
        images[currentIndex].style.display = 'block';
        currentImageEl.textContent = currentIndex + 1;
      };
      
      nextBtn.onclick = () => {
        images[currentIndex].style.display = 'none';
        currentIndex = (currentIndex + 1) % images.length;
        images[currentIndex].style.display = 'block';
        currentImageEl.textContent = currentIndex + 1;
      };
    }
    </script>


    <!-- Google tag (gtag.js)  Analytics-->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3XWYFT2MGC"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-3XWYFT2MGC');
    </script>


    <!-- 100% privacy-first analytics -->
    <script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>

  </body>
</html>